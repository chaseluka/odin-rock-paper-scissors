<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">Rock Paper Scissors</div>
    <div class="stats-on" onclick="statsOn()">Stats</div>
    <div id="stats" onclick="statsOff()">
        <div class="stats-container">
            <ul class="stats-text">
                <li class="round"></li>
                <li class="plywins"></li>
                <li class="cpuwins"></li>
                <li class="wn-prct"></li>
                <li class="match-won-ply"></li>
                <li class="match-won-cpu"></li>
                <li>Selected Percentage of: 
                    <ul>
                        <li class="rck-select"></li>
                        <li class="ppr-select"></li>
                        <li class="scs-select"></li>
                    </ul>
                </li>
            </ul>
        </div>

    </div>
    <div class="weapon">
        <div class="weapon-text">Choose your Weapon:</div>
    </div>
    <div class="selections">
        <div class="selections-container">
            <input type="image" src="images/rock.png" alt="Rock" id="rock" />
            <input type="image" src="images/paper.png" alt="Paper" id="paper" />
            <input type="image" src="images/scissors.png" alt="Scissors" id="scissors" />
        </div>
    </div>
    <div class="output">
        <div class="results"></div>
        <div class="scoreboard">
            <div class="player">
                <div class="you">You</div>
                <div class="cpu">CPU</div>
            </div>
            <div class="score">
                <div class="plyscore"></div>
                <div class="cpuscore"></div>
            </div>
        </div>
    </div>
    <div class="floaty">
        <div class="question" onclick="on()"> ? </div>
    </div>
    <div id="overlay" onclick="off()">
        <div class="container"> 
            <div class="how-to-container">
                <div id="how-to">How to Play:</div>
                <ol>
                    <li>Select either Rock, Paper, or Scissors.</li>
                    <li>Paper wins against Rock, Rock against Scissors, and Scissors against Paper.</li>
                    <li>Continue selections until one player reaches 5 points.</li>
                </ol>
            </div>
        </div>
    </div>
    <div id="game-over">
        <div class="game-over-container">
            <div class="game-over-text"></div>
            <button class="game-over-button" onclick="reset()">Play Again</button>
        </div>
    </div>
    <audio src="audio/scissors.mp3" id="scsaudio"></audio>
    <audio src="audio/rock.wav" id="rckaudio"></audio>
    <audio src="audio/paper.wav" id="ppraudio"></audio>
</body>
<script> 

    let playerScore = 0;
    let computerScore = 0;
    let playerWins = 0;
    let computerWins = 0;
    let plyMatchWins = 0;
    let cpuMatchWins = 0;
    let playerSelection = '';
    let computerSelection = '';
    let rnd = 0;
    let rock = 0;
    let paper = 0;
    let scissors = 0;
    const plyScore = document.querySelector('.plyscore');
    const cpuScore = document.querySelector('.cpuscore');
    const scsAudio = document.querySelector('#scsaudio');
    const rckAudio = document.querySelector('#rckaudio');
    const pprAudio = document.querySelector('#ppraudio');
    const btnRock = document.querySelector('#rock');
    const btnPaper = document.querySelector('#paper');
    const btnScissors = document.querySelector('#scissors');
    const rndPly = document.querySelector('.round');
    const plyWins = document.querySelector('.plywins');
    const cpuWins = document.querySelector('.cpuwins');
    const wnPrct = document.querySelector('.wn-prct');
    const rckSelect = document.querySelector('.rck-select');
    const pprSelect = document.querySelector('.ppr-select');
    const scsSelect = document.querySelector('.scs-select');
    const plyMtchWn = document.querySelector('.match-won-ply');
    const cpuMtchWn = document.querySelector('.match-won-cpu');
    
    function stats() {
        rndPly.textContent = "Rounds Played: " + (`${rnd}`);
        plyWins.textContent = "Player Fights Won: " + (`${playerWins}`);
        cpuWins.textContent =  "CPU Fights Won: " + (`${computerWins}`);
        wnPrct.textContent = "Fights Won Percentage: " + (((`${playerWins}`)/(`${rnd}`)) *100).toFixed(1) + "%";
        plyMtchWn.textContent = "Player Matches Won: " + (`${plyMatchWins}`);
        cpuMtchWn.textContent = "CPU Matches Won: " + (`${cpuMatchWins}`);
        rckSelect.textContent = "Rock: " + (((`${rock}`)/(`${rnd}`)) * 100).toFixed(1) + "%";
        pprSelect.textContent = "Paper: " + (((`${paper}`)/(`${rnd}`)) * 100).toFixed(1) + "%";
        scsSelect.textContent = "Scissors: " + (((`${scissors}`)/(`${rnd}`)) * 100).toFixed(1) + "%";
    }
    stats();
    
    function score(){
        plyScore.textContent = (`${playerScore}`);
        cpuScore.textContent = (`${computerScore}`);
    };
    score()

    function on() {
        document.getElementById("overlay").style.display = "block";
    };

    function off() {
        document.getElementById("overlay").style.display = "none";
    };

    function statsOn() {
        document.getElementById("stats").style.display = "block";
    };

    function statsOff() {
        document.getElementById("stats").style.display = "none";
    };

    function gameOver() {
        document.getElementById("game-over").style.display = "block";
    };

    function reset(){
        playerScore = 0;
        computerScore = 0;
        document.getElementById("game-over").style.display = "none";
        score();
    };

    btnRock.addEventListener('click', function(e) {
        playerSelection = 'rock';
        match();
        score();
        rckAudio.currentTime = 0;
        rckAudio.play();
    });

    btnPaper.addEventListener('click', function (e) {
        playerSelection = 'paper';
        match();
        score();
        pprAudio.currentTime = 0;
        pprAudio.play();
    });

    
    btnScissors.addEventListener('click', function (e) {
        playerSelection = 'scissors';
        match();
        score();
        scsAudio.currentTime = 0;
        scsAudio.play();
    });
    
    function match (){

        function computerPlay (){
            let randomNumber = Math.random()*3;
            
            if (randomNumber <= 1){
                return ('Rock');
            }
            else if (randomNumber <= 2){
                return ('Paper');
            }
            else if (randomNumber <= 3)
                return ('Scissors');
            else;
        };

        let computerSelection = computerPlay();

        function round (computerSelection, playerSelection){
            
            ++rnd;

            if (playerSelection === 'rock' && computerSelection === 'Paper'){ 
                ++computerScore;
                ++computerWins;
                ++rock;
                return ('You lose! Paper beats Rock');
            }
            else if (playerSelection === 'rock' && computerSelection === 'Scissors'){
                ++playerScore;
                ++playerWins;
                ++rock;
                return ('You win! Rock beats Scissors');
            }
            else if (playerSelection === 'rock' && computerSelection === 'Rock'){
                ++rock;
                return ('You tie! Rock cancels out Rock');
            }
            else if (playerSelection === 'paper' && computerSelection === 'Paper'){
                ++paper;
                return ('You tie! Paper cancels out Paper');
            }
            else if (playerSelection === 'paper' && computerSelection === 'Scissors'){
                ++computerScore;
                ++computerWins;
                ++paper;
                return ('You lose! Scissors beat Paper');
            }
            else if (playerSelection === 'paper' && computerSelection === 'Rock'){
                ++playerScore;
                ++playerWins;
                ++paper;
                return ('You win! Paper beats Rock');
            }
            else if (playerSelection === 'scissors' && computerSelection === 'Paper'){
                ++playerScore;
                ++playerWins;
                ++scissors;
                return ('You win! Scissors beats Paper');
            }
            else if (playerSelection === 'scissors' && computerSelection === 'Scissors'){
                ++scissors;
                return ('You Tie! Scissors cancels out Scissors');
            }
            else if (playerSelection === 'scissors' && computerSelection === 'Rock'){
                ++computerScore;
                ++computerWins;
                ++scissors;
                return ('You lose! Rock beats Scissors');
            }

        };

        const results = document.querySelector('.results');
        results.textContent = round(computerSelection, playerSelection);

        if (playerScore === 5){
            gameOver ();
            const win = document.querySelector('.game-over-text');
            win.textContent = 'You Won!';
            ++plyMatchWins;
        }
        else if (computerScore === 5){
            gameOver ();
            const lose = document.querySelector('.game-over-text');
            lose.textContent = 'You Lost!';
            ++cpuMatchWins;
        };

        stats();

    };
    
</script>
</html>